---
layout: layout.njk
title: êµ¬ë‹¨ ë¶„ì„
description: "KBO 10ê°œ êµ¬ë‹¨ì˜ ì „ë ¥ ë¶„ì„, ê²½ê¸° ì¼ì •, ìµœì‹  ë‰´ìŠ¤ì™€ ì¸ê¸° êµ¬ë‹¨ ìˆœìœ„ë¥¼ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”."
---

{% block styles %}
<link rel="stylesheet" href="/style/team-base.css" />
{% endblock %}

{% block content %}
<h1 class="page-title">êµ¬ë‹¨ ë¶„ì„</h1>

<div class="teams-analysis-layout">
  <!-- ì™¼ìª½: ì´ë²ˆ ì£¼ ê²½ê¸° ì¼ì • -->
  <aside class="weekly-schedule">
    <h2>ì´ë²ˆ ì£¼ ê²½ê¸° ì¼ì •</h2>
    <ul class="schedule-list">
      {% for day in weekDates %}
        {% if day.games | length > 0 %}
          <li class="schedule-day">
            <strong>{{ day.date | date("MM.dd (EEE)") }}</strong>
            {% for game in day.games %}
              <div class="match">
                <span class="team
                  {% if game.winner and game.homeScore > game.awayScore %} winner
                  {% elseif game.winner and game.homeScore < game.awayScore %} loser {% endif %}">
                  <img src="/images/s{{ game.homeSlug }}.png" alt="{{ game.home }}" class="team-logo">
                  {{ game.home }}
                </span>
                vs
                <span class="team
                  {% if game.winner and game.awayScore > game.homeScore %} winner
                  {% elseif game.winner and game.awayScore < game.homeScore %} loser {% endif %}">
                  <img src="/images/s{{ game.awaySlug }}.png" alt="{{ game.away }}" class="team-logo">
                  {{ game.away }}
                </span>
              </div>
            {% endfor %}
          </li>
        {% else %}
          <li class="schedule-day no-games">
            <strong>{{ day.date | date("MM.dd (EEE)") }}</strong>
            <span>ê²½ê¸° ì—†ìŒ</span>
          </li>
        {% endif %}
      {% endfor %}
    </ul>
  </aside>

  <!-- ì˜¤ë¥¸ìª½: í¬ë””ì›€ + ì¹´ë“œ -->
  <div class="right-content">
    <!-- ğŸ† ì¸ê¸° êµ¬ë‹¨ í¬ë””ì›€ -->
    <section class="vote-podium-section">
      <h2>ì¸ê¸° ìˆœìœ„</h2>
      {% if topTeams | length > 0 %}
        <div class="podium-wrapper">
          {% for team in topTeams %}
            <div class="podium-card podium-{{ loop.index }}">
              <img src="/images/{{ team.teamSlug }}.png" alt="{{ team.teamName }}" class="team-logo">
              <div class="team-info">
                <h3>{{ loop.index }}ìœ„ {{ team.teamName }}</h3>
                <p>{{ team.teamTotalVotes }}í‘œ</p>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="no-data">íˆ¬í‘œ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.</p>
      {% endif %}
    </section>

    <!-- ğŸ“‹ ì „ì²´ êµ¬ë‹¨ ì¹´ë“œ -->
    {% set voteTeams = voteSummary.teams if voteSummary and voteSummary.teams is iterable else [] %}
    <section class="teams-card-section">
      {% for team in teamsBoard | sort(attribute="rank") %}
        {% set voteCount = 0 %}
        {% for vote in voteTeams %}
          {% if vote.teamSlug == team.slug %}
            {% set voteCount = vote.teamTotalVotes %}
          {% endif %}
        {% endfor %}
        <div class="team-card team-{{ team.slug }}">
          <a href="/teams/{{ team.slug }}/">
            <img src="/images/{{ team.slug }}.png" alt="{{ team.name }}">
            <div class="team-info">
              <h3>{{ team.name }}</h3>
              <p>ìˆœìœ„: {{ team.rank }}ìœ„ | ìŠ¹ë¥ : {{ (team.winRate * 100) | round(1) }}%</p>
              <span class="last-game 
                {% if team.lastGame == 'ìŠ¹' %}win
                {% elseif team.lastGame == 'íŒ¨' %}lose
                {% elseif team.lastGame == 'ë¬´' %}draw
                {% endif %}">
                ìµœê·¼ ê²½ê¸°: {{ team.lastGame }}
              </span>
              <span class="vote-count">íˆ¬í‘œ ìˆ˜: {{ voteCount }}í‘œ</span>
            </div>
          </a>
          <button class="vote-btn" data-type="team" data-slug="{{ team.slug }}">
            ì´ êµ¬ë‹¨ì— íˆ¬í‘œí•˜ê¸°
          </button>
        </div>
      {% endfor %}
    </section>
  </div>
</div>

<script type="module">
  import { handleVote } from "/scripts/voteHandler.js";
  document.addEventListener("DOMContentLoaded", () => {
    document.querySelectorAll(".vote-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        handleVote(btn.dataset.type, btn.dataset.slug);
      });
    });
  });
</script>
{% endblock %}