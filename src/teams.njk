---
layout: layout.njk
title: 구단 분석
description: "KBO 10개 구단의 전력 분석, 경기 일정, 최신 뉴스와 인기 구단 순위를 한눈에 확인하세요."
---

{% block styles %}
  <link rel="stylesheet" href="/style/team-base.css" />
{% endblock %}

{% block content %}
  <h1 class="page-title">구단 분석</h1>

  <!-- 🏆 인기 구단 Podium -->
  <section class="podium-section">
    {% set sortedVotes = voteSummary 
      | sort(attribute="teamTotalVotes", order="desc") 
      | slice(0, 3) 
    %}
    <div class="podium podium-2">
      <img src="/images/{{ sortedVotes[1].teamSlug }}.png" alt="{{ sortedVotes[1].teamName }}">
      <span>{{ sortedVotes[1].teamName }}</span>
    </div>
    <div class="podium podium-1">
      <img src="/images/{{ sortedVotes[0].teamSlug }}.png" alt="{{ sortedVotes[0].teamName }}">
      <span>{{ sortedVotes[0].teamName }}</span>
    </div>
    <div class="podium podium-3">
      <img src="/images/{{ sortedVotes[2].teamSlug }}.png" alt="{{ sortedVotes[2].teamName }}">
      <span>{{ sortedVotes[2].teamName }}</span>
    </div>
  </section>

  <!-- 📊 구단 카드 리스트 -->
  <section class="teams-card-section">
    {% for team in teamsBoard | sort(attribute="rank") %}
      <a href="/teams/{{ team.slug }}/" class="team-card">
        <img src="/images/{{ team.slug }}.png" alt="{{ team.name }}">
        <div class="team-info">
          <h3>{{ team.name }}</h3>
          <p>순위: {{ team.rank }}위 | 승률: {{ team.승률 }}</p>
          <span class="last-game">최근 경기: {{ team.lastgame }}</span>
        </div>
      </a>
    {% endfor %}
  </section>

  <!-- 📅 이번 주 경기 일정 -->
  <section class="extra-info">
    <div class="weekly-schedule">
      <h3>이번 주 경기 일정</h3>
      <ul>
        {% set startDate = ("" | date("yyyy-MM-dd")) %}
        {% for game in leagueSchedule 
          | selectattr("date", "ge", startDate) 
          | slice(0, 7) 
        %}
          <li>
            <time datetime="{{ game.date }}">{{ game.date | date("MM.dd") }}</time> 
            {{ game.home }} vs {{ game.away }}
          </li>
        {% endfor %}
      </ul>
    </div>
  </section>
{% endblock %}